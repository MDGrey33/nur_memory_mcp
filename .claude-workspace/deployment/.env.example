# MCP Memory Server V3 - Environment Configuration
# Copy this file to .env and fill in your actual values
# IMPORTANT: NEVER commit .env to version control!

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# OpenAI API Key (REQUIRED)
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-your-key-here

# ============================================================================
# OPENAI CONFIGURATION
# ============================================================================

# Embedding model for semantic search
# Options: text-embedding-3-small, text-embedding-3-large (recommended)
# Default: text-embedding-3-large
OPENAI_EMBED_MODEL=text-embedding-3-large

# Event extraction model
# Options: gpt-4o-mini (cheaper), gpt-4-turbo-preview, gpt-4o (best quality)
# Default: gpt-4o-mini
# Note: Use gpt-4o-mini for development, gpt-4o for production
OPENAI_EVENT_MODEL=gpt-4o-mini

# ============================================================================
# POSTGRESQL CONFIGURATION
# ============================================================================

# PostgreSQL Database Name
POSTGRES_DB=events

# PostgreSQL User
POSTGRES_USER=events

# PostgreSQL Password
# !!! CRITICAL SECURITY WARNING !!!
# CHANGE THIS PASSWORD BEFORE ANY DEPLOYMENT!
# Generate a strong password with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Default value is INSECURE and should NEVER be used in production
POSTGRES_PASSWORD=CHANGE_ME_BEFORE_DEPLOYMENT

# Database Connection String (DSN)
# Format: postgresql://user:password@host:port/database
# UPDATE THIS when you change POSTGRES_PASSWORD!
EVENTS_DB_DSN=postgresql://events:CHANGE_ME_BEFORE_DEPLOYMENT@postgres:5432/events

# ============================================================================
# CHROMADB CONFIGURATION
# ============================================================================

# ChromaDB Host (internal Docker network)
CHROMA_HOST=chroma

# ChromaDB Port (internal container port)
CHROMA_PORT=8000

# ============================================================================
# MCP SERVER CONFIGURATION
# ============================================================================

# MCP Server Port
MCP_PORT=3000

# Log Level
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Default: INFO
# Use DEBUG for development, INFO for production
LOG_LEVEL=INFO

# ============================================================================
# EVENT WORKER CONFIGURATION
# ============================================================================

# Worker Identifier
# Use unique IDs if running multiple workers
WORKER_ID=worker-1

# Polling Interval (milliseconds)
# How often the worker checks for new jobs
# Default: 1000 (1 second)
# Recommendation: 1000-5000 for production
POLL_INTERVAL_MS=1000

# Maximum Retry Attempts
# How many times to retry failed extraction jobs
# Default: 5
EVENT_MAX_ATTEMPTS=5

# ============================================================================
# ADVANCED CONFIGURATION (Optional)
# ============================================================================

# Postgres Connection Pool Size
# Default: 10
# PG_POOL_SIZE=10

# Postgres Connection Pool Max Overflow
# Default: 20
# PG_POOL_MAX_OVERFLOW=20

# Embedding Batch Size
# Number of texts to embed in one API call
# Default: 100
# EMBED_BATCH_SIZE=100

# Chunking Configuration
# TOKEN_WINDOW=900
# TOKEN_OVERLAP=100
# TOKEN_THRESHOLD=1200

# ============================================================================
# DOCKER COMPOSE CONFIGURATION
# ============================================================================

# Docker Compose Project Name (optional)
# Prefix for all container names
# COMPOSE_PROJECT_NAME=mcp-memory

# ============================================================================
# DEVELOPMENT CONFIGURATION
# ============================================================================

# Use cheaper/faster models for development
# Uncomment these lines for dev environment:
# OPENAI_EVENT_MODEL=gpt-4o-mini
# LOG_LEVEL=DEBUG
# POLL_INTERVAL_MS=2000

# ============================================================================
# PRODUCTION CHECKLIST
# ============================================================================
#
# Before deploying to production:
#
# 1. Change POSTGRES_PASSWORD to a strong password
# 2. Update EVENTS_DB_DSN with the new password
# 3. Set OPENAI_EVENT_MODEL=gpt-4o for best quality
# 4. Set LOG_LEVEL=INFO
# 5. Review resource limits in docker-compose.yml
# 6. Enable SSL for Postgres if exposing port publicly
# 7. Set up backup strategy for postgres_data volume
# 8. Configure log aggregation (see monitoring.md)
# 9. Set up alerts for job failures (see monitoring.md)
# 10. Review and adjust EVENT_MAX_ATTEMPTS based on needs
#
# ============================================================================
