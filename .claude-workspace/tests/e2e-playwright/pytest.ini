[pytest]
testpaths = api browser integration quality performance
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers
markers =
    api: API E2E tests (no browser required)
    browser: Browser UI tests (MCP Inspector)
    integration: Cross-service integration tests
    quality: AI-assessed quality tests
    performance: Performance benchmark tests
    smoke: Smoke tests that should run first
    memory: Memory-related tests
    artifact: Artifact-related tests
    event: Event-related tests
    health: Health check and connectivity tests
    v3: V3-specific tests (event extraction)
    v4: V4-specific tests (entity resolution, graph)
    slow: Slow running tests (>30s)
    requires_postgres: Tests requiring Postgres database
    requires_worker: Tests requiring event extraction worker
    requires_ai: Tests requiring OpenAI API (costs money)
    skip_ci: Skip in CI environment
    wip: Work in progress (skip by default)

# Options
addopts =
    --strict-markers
    -v
    --tb=short
    --color=yes

# Async mode
asyncio_mode = auto

# Warnings filter
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Timeout (requires pytest-timeout)
timeout = 60

# Log settings
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %H:%M:%S

# Minimum pytest version
minversion = 7.0
